{{ 'breadcrumbs.css' | asset_url | stylesheet_tag }}
{{ 'two-columns.css' | asset_url | stylesheet_tag }}
{{ 'range-slider.css' | asset_url | stylesheet_tag }}
{{ 'filters-sidebar.css' | asset_url | stylesheet_tag }}
{{ 'filters-collapsible.css' | asset_url | stylesheet_tag }}
{{ 'product-card.css' | asset_url | stylesheet_tag }}
{{ 'main-search.css' | asset_url | stylesheet_tag }}

<script src="{{ 'filters.js' | asset_url }}" defer="defer"></script>
<script src="{{ 'product.js' | asset_url }}" defer="defer"></script>

{% assign section_prefix_class = 'main-search' %}

{%- style -%}
  .{{ section_prefix_class }}-{{ section.id }}{
    --section-padding-top: {{ section.settings.section_top_padding }}px;
    --section-padding-bottom: {{ section.settings.section_bottom_padding }}px;
    --columns-count: {{ section.settings.number_of_columns_on_desktop }};
    --columns-count-mob: 1;
  }

  {%- assign query = section.settings.mob_cols_query | append: 'px' -%}
  @media (min-width: {{ query }}) and (max-width: 767px){
    .{{ section_prefix_class }}-{{ section.id }}{
      --columns-count-mob: {{ section.settings.number_of_columns_on_mobile }};
    }
  }
{%- endstyle -%}

{% liquid
  assign section_align_class = '--align-left'
  assign section_scheme_class = section.settings.section_color_scheme | prepend: 'scheme scheme--'
    
  if section.settings.section_text_alignment == 'center'
    assign section_align_class = '--align-center'
  elsif section.settings.section_text_alignment == 'right'
    assign section_align_class = '--align-right'
  endif

  if section.settings.mobile_text_alignment
    assign section_align_class_mobile = '--mobile-align-center' 
  endif
  
  assign product_image_ratio_class = ''
  case section.settings.column_image_ratio
    when 'portrait'
      assign product_image_ratio_class = '--portrait-media'
    when 'square'
      assign product_image_ratio_class = '--square-media'
    when 'landscape'
      assign product_image_ratio_class = '--landscape-media'
    else
      assign product_image_ratio_class = '--adapt-media'
  endcase
  assign section_media_size_class = product_image_ratio_class
  
  if section.settings.filter_type == 'horizontal'
    assign filter_layout_class = 'filter_layout_v2'
  endif
%}

<div class="{{ section_prefix_class }} {{ section_media_size_class }} {{ section_scheme_class }} {{ section_prefix_class }}-{{ section.id }} {{ section_align_class_mobile }} {{ section_align_class }} {{ filter_layout_class }}">
  <div class="container">
    {%- render 'element-breadcrumb' -%}
    <div class="{{ section_prefix_class }}_wrapper">
      <header class="page-head">
        {%- render 'element-heading' | elem_heading_tag: 'h1' | elem_heading_parent: section_prefix_class | elem_heading_text: section.settings.section_heading | elem_heading_size: section.settings.section_heading_size | elem_heading_custom_class: 'mty' -%}
        {% if page.content != empty and section.settings.section_description == empty %}
          {{ page.content }}
          {% else %}
            {{ section.settings.section_description }}
        {% endif %}
      </header>
      <div class="{{ section_prefix_class }}_search-field">
        <div id="main-search">
          <form action="{{ routes.search_url }}" method="get" role="search">
            <input class="search-bar_input form-control"
              type="search"
              name="q"
              autocomplete="off"
              id="search-bar_input-{{ section.id }}"
              value="{{ search.terms | escape }}"
              placeholder="{{ 'sections.search.s_placeholder' | t }}&hellip;"
            >
            <input type="hidden" name="options[prefix]" value="last">
            <label for="search-bar_input-{{ section.id }}" class="visually-hidden">
              {%- render 'icons-data', width: 18, height: 18, use_icon: true, icon_reference: 'search' -%}
              <span class="visually-hidden">{{ 'sections.search.s_button' | t }}</span>
            </label>
            <button type="submit" class="search-bar_submit-btn">
              {%- render 'icons-data', width: 18, height: 18, use_icon: true, icon_reference: 'search' -%}
              <span class="visually-hidden">{{ 'sections.search.s_button' | t }}</span>
            </button>
          </form>
        </div>
        {%- if search.performed -%}
          {% assign no_results = false %}
          {%- if search.results_count > 0 -%}
            <h2 class="{{ section_prefix_class }}_result-heading">{{ 'sections.search.results_with_count_and_term' | t: terms: search.terms, count: search.results_count }}</h2>
          {%- endif -%}
          {%- if search.results_count == 0 and search.filters == empty -%}
            <h2 class="{{ section_prefix_class }}_result-heading">{{ 'sections.search.no_results' | t: terms: search.terms }}</h2>
            {% assign no_results = true %}
          {%- endif -%}
          {%- else -%}
            <h2 class="{{ section_prefix_class }}_result-heading">{{ 'sections.search.s_for' | t }}</h2>
        {%- endif -%}
      </div>
      {% if section.settings.enable_filtering %}
        {% unless section.settings.filter_type == 'vertical' %}
          {%- if search.performed -%}
            {% unless no_results %}
              <header class="filters-collapsible">
                {% render 'filters-collapsible', results: search, filter_default: true, results_counter: search.results_count %}
              </header>
              <div id="filters-grid" data-id="{{ section.id }}">
                {%- liquid
                  render 'filters-header', results: search, filter_no_default: false, results_counter: search.results_count
                  assign results_to_show = section.settings.number_of_columns_on_desktop | times: section.settings.number_of_rows
                -%}
                <div data-render-grid="" class="grid filters-grid {% if section.settings.number_of_columns_on_desktop == 4 %}{% if section.settings.filter_type == 'vertical' %} --product-card-conjusted{% endif %}{% endif %}">
                  {%- if search.results.size == 0 and search.filters != empty -%}
                    {%- liquid
                      assign sort_by = search.sort_by | default: search.default_sort_by
                      if search.url
                        assign results_url = search.url
                      else
                        assign terms = search.terms | escape
                        assign results_url = '?q=' | append: terms | append: '&options%5Bprefix%5D=last&sort_by=' | append: sort_by
                      endif
                    -%}
                    <div class="grid_empty-content --align-center">
                      <i class="grid_empty-icn-wrap">
                        {%- render 'icons-data', width: 51, height: 51, use_icon: true, icon_reference: 'empty-cart' -%}
                      </i>
                      <strong class="h4 grid_empty-heading" role="heading" aria-level="2">{{ 'sections.search.no_filter_results' | t }}</strong>
                      <p>{{ 'sections.search.use_fewer_filters_html' | t: link: results_url, class: "filters-form_remove-all" }}</p>
                    </div>
                    {% else %}
                      {%- case section.settings.paging_type -%}
                        {%- when 'click_load' -%}
                          {%- paginate search.results by results_to_show -%}
                            {%- for item in search.results -%}
                              {%- case item.object_type -%}
                                {%- when 'product' -%}
                                  {% assign product = item %}
                                  <div data-render-columns="">
                                    <article class="product-column {% if section.settings.hide_info_bar_on_mob %}--hide-infos-mob{% endif %} {% if section.settings.hide_qty_field_on_mob %}--hide-qty-mob{% endif %} {{ section.id }}-{{ product.id }}">
                                      {% liquid
                                        assign productJson = all_products[product]
                                        assign js_contents_prefix = 'js-contents--'
                                        assign product_form_id = section.id | append: product.id | append: forloop.index
                                        
                                        render 'product-card' product: product, product_form_id: product_form_id, js_contents_prefix: js_contents_prefix, productJson: productJson, column_index: forloop.index, product_price_variation: false
                                      %}
                                    </article>
                                  </div>
                                {%- when 'article' -%}
                                  <article data-render-columns="" class="article-search">
                                    {% if item.image != null %}
                                      <a href="{{ item.url }}" class="article-search_card-media">
                                        {%- render 'element-image' | elem_image: item.image | elem_image_class: 'image-class' | elem_image_placeholder: 'collection-3' | elem_image_alt_text: item.title -%}
                                        <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                                      </a>
                                      {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: section_prefix_class | elem_heading_text: item.title | elem_heading_custom_class: 'mty' | elem_heading_link: item.url -%}
                                      <span class="article-search_author">{{ item.author }}</span>
                                    {% else %}
                                      <a class="page-card_link--absolute" href="{{ item.url }}">
                                        {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: 'page-card' | elem_heading_text: item.title | elem_heading_custom_class: 'mty' -%}
                                        <span class="article-search_author">{{ item.author }}</span>
                                        <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                                      </a>
                                    {% endif %}
                                  </article>
                                {%- when 'page' -%}
                                  {% render 'page-card' page: item %}
                              {%- endcase -%}
                            {%- endfor -%}
                            {% render 'grid-load-more', paginate: paginate %}
                          {%- endpaginate -%}
                        {%- when 'load_more' -%}
                          {%- paginate search.results by results_to_show -%}
                            {%- for item in search.results -%}
                              {%- case item.object_type -%}
                                {%- when 'product' -%}
                                  {% assign product = item %}
                                  <div data-render-columns="">
                                    <article class="product-column {% if section.settings.hide_info_bar_on_mob %}--hide-infos-mob{% endif %} {% if section.settings.hide_qty_field_on_mob %}--hide-qty-mob{% endif %} {{ section.id }}-{{ product.id }}">
                                      {% liquid
                                        assign productJson = all_products[product]
                                        assign js_contents_prefix = 'js-contents--'
                                        assign product_form_id = section.id | append: product.id | append: forloop.index
                                        
                                        render 'product-card' product: product, product_form_id: product_form_id, js_contents_prefix: js_contents_prefix, productJson: productJson, column_index: forloop.index, product_price_variation: false
                                      %}
                                    </article>
                                  </div>
                                {%- when 'article' -%}
                                  <article data-render-columns="" class="article-search">
                                    {% if item.image != null %}
                                      <a href="{{ item.url }}" class="article-search_card-media">
                                        {%- render 'element-image' | elem_image: item.image | elem_image_class: 'image-class' | elem_image_placeholder: 'collection-3' | elem_image_alt_text: item.title -%}
                                        <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                                      </a>
                                      {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: section_prefix_class | elem_heading_text: item.title | elem_heading_custom_class: 'mty' | elem_heading_link: item.url -%}
                                      <span class="article-search_author">{{ item.author }}</span>
                                    {% else %}
                                      <a class="page-card_link--absolute" href="{{ item.url }}">
                                        {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: 'page-card' | elem_heading_text: item.title | elem_heading_custom_class: 'mty' -%}
                                        <span class="article-search_author">{{ item.author }}</span>
                                        <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                                      </a>
                                    {% endif %}
                                  </article>
                                {%- when 'page' -%}
                                  {% render 'page-card' page: item %}
                              {%- endcase -%}
                            {%- endfor -%}
                            {% render 'grid-load-more', paginate: paginate %}
                          {%- endpaginate -%}
                        {%- else -%}
                          {%- paginate search.results by results_to_show -%}
                            {%- for item in search.results -%}
                              {%- case item.object_type -%}
                                {%- when 'product' -%}
                                  {% assign product = item %}
                                  <div>
                                    <article class="product-column {% if section.settings.hide_info_bar_on_mob %}--hide-infos-mob{% endif %} {% if section.settings.hide_qty_field_on_mob %}--hide-qty-mob{% endif %} {{ section.id }}-{{ product.id }}">
                                      {% liquid
                                        assign productJson = all_products[product]
                                        assign js_contents_prefix = 'js-contents--'
                                        assign product_form_id = section.id | append: product.id | append: forloop.index
                                        
                                        render 'product-card' product: product, product_form_id: product_form_id, js_contents_prefix: js_contents_prefix, productJson: productJson, column_index: forloop.index, product_price_variation: false
                                      %}
                                    </article>
                                  </div>
                                {%- when 'article' -%}
                                  <article class="article-search">
                                    {% if item.image != null %}
                                      <a href="{{ item.url }}" class="article-search_card-media">
                                        {%- render 'element-image' | elem_image: item.image | elem_image_class: 'image-class' | elem_image_placeholder: 'collection-3' | elem_image_alt_text: item.title -%}
                                        <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                                      </a>
                                      {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: section_prefix_class | elem_heading_text: item.title | elem_heading_custom_class: 'mty' | elem_heading_link: item.url -%}
                                      <span class="article-search_author">{{ item.author }}</span>
                                    {% else %}
                                      <a class="page-card_link--absolute" href="{{ item.url }}">
                                        {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: 'page-card' | elem_heading_text: item.title | elem_heading_custom_class: 'mty' -%}
                                        <span class="article-search_author">{{ item.author }}</span>
                                        <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                                      </a>
                                    {% endif %}
                                  </article>
                                {%- when 'page' -%}
                                  {% render 'page-card' page: item %}
                              {%- endcase -%}
                            {%- endfor -%}
                            {% render 'pagination', paginate: paginate %}
                          {%- endpaginate -%}
                      {%- endcase -%}
                  {%- endif -%}
                  <span class="--loader filters-grid_loader">
                    <span class="visually-hidden">{{ 'accessibility.loading' | t }}</span>
                    <i class="ico-wrapper">
                      {%- render 'icons-data', width: 16, height: 16, use_icon: true, icon_reference: 'loader' -%}
                    </i>
                  </span>
                </div>
              </div>
            {% endunless %}
          {%- endif -%}
          {%- else -%}
            {%- if search.performed -%}
              {% unless no_results %}
                <div class="two-columns">
                  <div class="two-columns_content-wrapper">
                    <div id="filters-grid" data-id="{{ section.id }}">
                      {% liquid
                        render 'filters-header', results: search, filter_no_default: false, results_counter: search.results_count
                        
                        assign results_to_show = section.settings.number_of_columns_on_desktop | times: section.settings.number_of_rows
                      %}
                      <div data-render-grid="" class="grid filters-grid {% if section.settings.number_of_columns_on_desktop == 4 %}{% if section.settings.filter_type == 'vertical' %} --product-card-conjusted{% endif %}{% endif %}">
                        {%- if search.results.size == 0 and search.filters != empty -%}
                          {%- liquid
                            assign sort_by = search.sort_by | default: search.default_sort_by
                            if search.url
                              assign results_url = search.url
                            else
                              assign terms = search.terms | escape
                              assign results_url = '?q=' | append: terms | append: '&options%5Bprefix%5D=last&sort_by=' | append: sort_by
                            endif
                          -%}
                          <div class="grid_empty-content --align-center">
                            <i class="grid_empty-icn-wrap">
                              {%- render 'icons-data', width: 51, height: 51, use_icon: true, icon_reference: 'empty-cart' -%}
                            </i>
                            <strong class="h4 grid_empty-heading" role="heading" aria-level="2">{{ 'sections.search.no_filter_results' | t }}</strong>
                            <p>{{ 'sections.search.use_fewer_filters_html' | t: link: results_url, class: "filters-form_remove-all" }}</p>
                          </div>
                          {% else %}
                            {%- case section.settings.paging_type -%}
                              {%- when 'click_load' -%}
                                {%- paginate search.results by results_to_show -%}
                                  {%- for item in search.results -%}
                                    {%- case item.object_type -%}
                                      {%- when 'product' -%}
                                        {% assign product = item %}
                                        <div data-render-columns="">
                                          <article class="product-column {% if section.settings.hide_info_bar_on_mob %}--hide-infos-mob{% endif %} {% if section.settings.hide_qty_field_on_mob %}--hide-qty-mob{% endif %} {{ section.id }}-{{ product.id }}">
                                            {% liquid
                                              assign productJson = all_products[product]
                                              assign js_contents_prefix = 'js-contents--'
                                              assign product_form_id = section.id | append: product.id | append: forloop.index
                                              
                                              render 'product-card' product: product, product_form_id: product_form_id, js_contents_prefix: js_contents_prefix, productJson: productJson, column_index: forloop.index, product_price_variation: false
                                            %}
                                          </article>
                                        </div>
                                      {%- when 'article' -%}
                                        <article data-render-columns="" class="article-search">
                                          {% if item.image != null %}
                                            <a href="{{ item.url }}" class="article-search_card-media">
                                              {%- render 'element-image' | elem_image: item.image | elem_image_class: 'image-class' | elem_image_placeholder: 'collection-3' | elem_image_alt_text: item.title -%}
                                              <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                                            </a>
                                            {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: section_prefix_class | elem_heading_text: item.title | elem_heading_custom_class: 'mty' | elem_heading_link: item.url -%}
                                            <span class="article-search_author">{{ item.author }}</span>
                                          {% else %}
                                            <a class="page-card_link--absolute {% if settings.enable_hover_anims %}anim--shine{% endif %}" href="{{ item.url }}">
                                              {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: 'page-card' | elem_heading_text: item.title | elem_heading_custom_class: 'mty' -%}
                                              <span class="article-search_author">{{ item.author }}</span>
                                              <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                                            </a>
                                          {% endif %}
                                        </article>
                                      {%- when 'page' -%}
                                        {% render 'page-card', page: item %}
                                    {%- endcase -%}
                                  {%- endfor -%}
                                  {% render 'grid-load-more', paginate: paginate %}
                                {%- endpaginate -%}
                              {%- when 'load_more' -%}
                                {%- paginate search.results by results_to_show -%}
                                  {%- for item in search.results -%}
                                    {%- case item.object_type -%}
                                      {%- when 'product' -%}
                                        {% assign product = item %}
                                        <div data-render-columns="">
                                          <article class="product-column {% if section.settings.hide_info_bar_on_mob %}--hide-infos-mob{% endif %} {% if section.settings.hide_qty_field_on_mob %}--hide-qty-mob{% endif %} {{ section.id }}-{{ product.id }}">
                                            {% liquid
                                              assign productJson = all_products[product]
                                              assign js_contents_prefix = 'js-contents--'
                                              assign product_form_id = section.id | append: product.id | append: forloop.index
                                              
                                              render 'product-card' product: product, product_form_id: product_form_id, js_contents_prefix: js_contents_prefix, productJson: productJson, column_index: forloop.index, product_price_variation: false
                                            %}
                                          </article>
                                        </div>
                                      {%- when 'article' -%}
                                        <article data-render-columns="" class="article-search">
                                          {% if item.image != null %}
                                            <a href="{{ item.url }}" class="article-search_card-media">
                                              {%- render 'element-image' | elem_image: item.image | elem_image_class: 'image-class' | elem_image_placeholder: 'collection-3' | elem_image_alt_text: item.title -%}
                                              <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                                            </a>
                                            {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: section_prefix_class | elem_heading_text: item.title | elem_heading_custom_class: 'mty' | elem_heading_link: item.url -%}
                                            <span class="article-search_author">{{ item.author }}</span>
                                          {% else %}
                                            <a class="page-card_link--absolute {% if settings.enable_hover_anims %}anim--shine{% endif %}" href="{{ item.url }}">
                                              {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: 'page-card' | elem_heading_text: item.title | elem_heading_custom_class: 'mty' -%}
                                              <span class="article-search_author">{{ item.author }}</span>
                                              <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                                            </a>
                                          {% endif %}
                                        </article>
                                      {%- when 'page' -%}
                                        {% render 'page-card', page: item %}
                                    {%- endcase -%}
                                  {%- endfor -%}
                                  {% render 'grid-load-more', paginate: paginate, infinite: true %}
                                {%- endpaginate -%}
                              {%- else -%}
                                {%- paginate search.results by results_to_show -%}
                                  {%- for item in search.results -%}
                                    {%- case item.object_type -%}
                                      {%- when 'product' -%}
                                        {% assign product = item %}
                                        <div data-render-columns="">
                                          <article class="product-column {% if section.settings.hide_info_bar_on_mob %}--hide-infos-mob{% endif %} {% if section.settings.hide_qty_field_on_mob %}--hide-qty-mob{% endif %} {{ section.id }}-{{ product.id }}">
                                            {% liquid
                                              assign productJson = all_products[product]
                                              assign js_contents_prefix = 'js-contents--'
                                              assign product_form_id = section.id | append: product.id | append: forloop.index
                                              
                                              render 'product-card' product: product, product_form_id: product_form_id, js_contents_prefix: js_contents_prefix, productJson: productJson, column_index: forloop.index, product_price_variation: false
                                            %}
                                          </article>
                                        </div>
                                      {%- when 'article' -%}
                                        <article data-render-columns="" class="article-search">
                                          {% if item.image != null %}
                                            <a href="{{ item.url }}" class="article-search_card-media">
                                              {%- render 'element-image' | elem_image: item.image | elem_image_class: 'image-class' | elem_image_placeholder: 'collection-3' | elem_image_alt_text: item.title -%}
                                              <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                                            </a>
                                            {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: section_prefix_class | elem_heading_text: item.title | elem_heading_custom_class: 'mty' | elem_heading_link: item.url -%}
                                            <span class="article-search_author">{{ item.author }}</span>
                                          {% else %}
                                            <a class="page-card_link--absolute {% if settings.enable_hover_anims %}anim--shine{% endif %}" href="{{ item.url }}">
                                              {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: 'page-card' | elem_heading_text: item.title | elem_heading_custom_class: 'mty' -%}
                                              <span class="article-search_author">{{ item.author }}</span>
                                              <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                                            </a>
                                          {% endif %}
                                        </article>
                                      {%- when 'page' -%}
                                        {% render 'page-card', page: item %}
                                    {%- endcase -%}
                                  {%- endfor -%}
                                  {% render 'pagination', paginate: paginate %}
                                {%- endpaginate -%}
                            {%- endcase -%}
                        {%- endif -%}
                        <span class="--loader filters-grid_loader">
                          <span class="visually-hidden">{{ 'accessibility.loading' | t }}</span>
                          <i class="ico-wrapper">
                            {%- render 'icons-data', width: 16, height: 16, use_icon: true, icon_reference: 'loader' -%}
                          </i>
                        </span>
                      </div>
                    </div>
                  </div>
                  <div class="two-columns_sidebar-wrapper">
                    <modal-component
                      data-modal="modal-filters-horizontal-drawer"
                      data-desktop-hidden="true"
                      class="modal--filter"
                    >
                      <div
                        class="modal --drawer modal-component modal-component--filters-horizontal-drawer scheme--{{ section.settings.section_color_scheme }}"
                        role="dialog"
                        aria-modal="true"
                        aria-labelledby="{{ section.id }}-modal-filters-horizontal-drawer-heading"
                        aria-describedby="{{ section.id }}-modal-filters-horizontal-drawer"
                        tabindex="-1"
                      >
                        <div class="modal-component_wrapper" id="{{ section.id }}-modal-filters-horizontal-drawer">
                          <div class="modal-component_body">
                            <aside class="filters-sidebar">
                              <header class="filters-sidebar_head">
                                <i class="fsh_icn">
                                  {%- render 'icons-data', width: 20, height: 20, use_icon: true, icon_reference: 'filters' -%}
                                </i>
                                <strong class="filters-sidebar_heading" id="{{ section.id }}-modal-filters-horizontal-drawer-heading">{{- 'sections.products.facets.title' | t -}}</strong>
                                <modal-component-toggler>
                                  <button type="button"
                                    data-expanded="true"
                                    data-toggle-attribute="false"
                                    data-modal-ref="modal-filters-horizontal-drawer"
                                    class="modal-component_btn-close"
                                    data-desktop-hidden="true"
                                  >
                                    {%- render 'icons-data', width: 14, height: 14, use_icon: true, icon_reference: 'cross' -%}
                                    <span class="visually-hidden">{{ 'accessibility.close' | t }}</span>
                                  </button>
                                </modal-component-toggler>
                              </header>
                              {% render 'filters-sidebar', results: search, filter_default: true, results_counter: search.results_count %}
                            </aside>
                          </div>
                        </div>
                      </div>
                    </modal-component>
                  </div>
                </div>
              {% endunless %}
            {%- endif -%}
        {%- endunless -%}
        {% else %}
          {% assign results_to_show = section.settings.number_of_columns_on_desktop | times: section.settings.number_of_rows %}
          <div class="grid" data-render-grid="">
            {%- if search.performed -%}
              {%- case section.settings.paging_type -%}
                {%- when 'click_load' -%}
                  {%- paginate search.results by results_to_show -%}
                    {%- for item in search.results -%}
                      {%- case item.object_type -%}
                        {%- when 'product' -%}
                          {% assign product = item %}
                          <div data-render-columns="">
                            <article class="product-column {% if section.settings.hide_info_bar_on_mob %}--hide-infos-mob{% endif %} {% if section.settings.hide_qty_field_on_mob %}--hide-qty-mob{% endif %} {{ section.id }}-{{ product.id }}">
                              {% liquid
                                assign productJson = all_products[product]
                                assign js_contents_prefix = 'js-contents--'
                                assign product_form_id = section.id | append: product.id | append: forloop.index
                                
                                render 'product-card' product: product, product_form_id: product_form_id, js_contents_prefix: js_contents_prefix, productJson: productJson, column_index: forloop.index, product_price_variation: false
                              %}
                            </article>
                          </div>
                        {%- when 'article' -%}
                          <article class="article-search" data-render-columns="">
                            {% if item.image != null %}
                              <a href="{{ item.url }}" class="article-search_card-media {% if settings.enable_hover_anims %}anim--shine{% endif %}">
                                {%- render 'element-image' | elem_image: item.image | elem_image_class: 'image-class' | elem_image_placeholder: 'collection-3' | elem_image_alt_text: item.title -%}
                                <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                              </a>
                              {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: section_prefix_class | elem_heading_text: item.title | elem_heading_custom_class: 'mty' | elem_heading_link: item.url -%}
                              <span class="article-search_author">{{ item.author }}</span>
                            {% else %}
                              <a class="page-card_link--absolute {% if settings.enable_hover_anims %}anim--shine{% endif %}" href="{{ item.url }}">
                                {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: 'page-card' | elem_heading_text: item.title | elem_heading_custom_class: 'mty' -%}
                                <span class="article-search_author">{{ item.author }}</span>
                                <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                              </a>
                            {% endif %}
                          </article>
                        {%- when 'page' -%}
                          {% render 'page-card', page: item %}
                      {%- endcase -%}
                    {%- endfor -%}
                    {%- render 'grid-load-more', paginate: paginate -%}
                  {%- endpaginate -%}
                {%- when 'load_more' -%}
                  {%- paginate search.results by results_to_show -%}
                    {%- for item in search.results -%}
                      {%- case item.object_type -%}
                        {%- when 'product' -%}
                          {% assign product = item %}
                          <div data-render-columns="">
                            <article class="product-column {% if section.settings.hide_info_bar_on_mob %}--hide-infos-mob{% endif %} {% if section.settings.hide_qty_field_on_mob %}--hide-qty-mob{% endif %} {{ section.id }}-{{ product.id }}">
                              {% liquid
                                assign productJson = all_products[product]
                                assign js_contents_prefix = 'js-contents--'
                                assign product_form_id = section.id | append: product.id | append: forloop.index
                                
                                render 'product-card' product: product, product_form_id: product_form_id, js_contents_prefix: js_contents_prefix, productJson: productJson, column_index: forloop.index, product_price_variation: false
                              %}
                            </article>
                          </div>
                        {%- when 'article' -%}
                          <article class="article-search" data-render-columns="">
                            {% if item.image != null %}
                              <a href="{{ item.url }}" class="article-search_card-media {% if settings.enable_hover_anims %}anim--shine{% endif %}">
                                {%- render 'element-image' | elem_image: item.image | elem_image_class: 'image-class' | elem_image_placeholder: 'collection-3' | elem_image_alt_text: item.title -%}
                                <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                              </a>
                              {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: section_prefix_class | elem_heading_text: item.title | elem_heading_custom_class: 'mty' | elem_heading_link: item.url -%}
                              <span class="article-search_author">{{ item.author }}</span>
                            {% else %}
                              <a class="page-card_link--absolute {% if settings.enable_hover_anims %}anim--shine{% endif %}" href="{{ item.url }}">
                                {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: 'page-card' | elem_heading_text: item.title | elem_heading_custom_class: 'mty' -%}
                                <span class="article-search_author">{{ item.author }}</span>
                                <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                              </a>
                            {% endif %}
                          </article>
                        {%- when 'page' -%}
                          {% render 'page-card', page: item %}
                      {%- endcase -%}
                    {%- endfor -%}
                    {%- render 'grid-load-more', paginate: paginate, infinite: true -%}
                  {%- endpaginate -%}
                {%- else -%}
                  {%- paginate search.results by results_to_show -%}
                    {%- for item in search.results -%}
                      {%- case item.object_type -%}
                        {%- when 'product' -%}
                          {% assign product = item %}
                          <div>
                            <article class="product-column {% if section.settings.hide_info_bar_on_mob %}--hide-infos-mob{% endif %} {% if section.settings.hide_qty_field_on_mob %}--hide-qty-mob{% endif %} {{ section.id }}-{{ product.id }}">
                              {% liquid
                                assign productJson = all_products[product]
                                assign js_contents_prefix = 'js-contents--'
                                assign product_form_id = section.id | append: product.id | append: forloop.index
                                
                                render 'product-card' product: product, product_form_id: product_form_id, js_contents_prefix: js_contents_prefix, productJson: productJson, column_index: forloop.index, product_price_variation: false
                              %}
                            </article>
                          </div>
                        {%- when 'article' -%}
                          <article class="article-search">
                            {% if item.image != null %}
                              <a href="{{ item.url }}" class="article-search_card-media {% if settings.enable_hover_anims %}anim--shine{% endif %}">
                                {%- render 'element-image' | elem_image: item.image | elem_image_class: 'image-class' | elem_image_placeholder: 'collection-3' | elem_image_alt_text: item.title -%}
                                <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                              </a>
                              {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: section_prefix_class | elem_heading_text: item.title | elem_heading_custom_class: 'mty' | elem_heading_link: item.url -%}
                              <span class="article-search_author">{{ item.author }}</span>
                            {% else %}
                              <a class="page-card_link--absolute {% if settings.enable_hover_anims %}anim--shine{% endif %}" href="{{ item.url }}">
                                {%- render 'element-heading' | elem_heading_tag: 'h3' | elem_heading_size: 'heading_x_small' | elem_heading_parent: 'page-card' | elem_heading_text: item.title | elem_heading_custom_class: 'mty' -%}
                                <span class="article-search_author">{{ item.author }}</span>
                                <span class="page-card_tag">{{ 'sections.search.blog' | t }}</span>
                              </a>
                            {% endif %}
                          </article>
                        {%- when 'page' -%}
                          {% render 'page-card', page: item %}
                      {%- endcase -%}
                    {%- endfor -%}
                    {% render 'pagination', paginate: paginate %}
                  {%- endpaginate -%}
              {%- endcase -%}
            {%- endif -%}
          </div>
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.main_search.name",
  "tag": "section",
  "settings": [
    {
      "type": "inline_richtext",
      "id": "section_heading",
      "label": "t:sections.common.heading.label",
      "default": "Search"
    },
    {
      "type": "select",
      "id": "section_heading_size",
      "label": "t:sections.common.heading.size.label",
      "options": [
        {
          "value": "heading_xx_large",
          "label": "t:sections.common.heading.size.options.opt_1.label"
        },
        {
          "value": "heading_x_large",
          "label": "t:sections.common.heading.size.options.opt_2.label"
        },
        {
          "value": "heading_large",
          "label": "t:sections.common.heading.size.options.opt_3.label"
        },
        {
          "value": "heading_medium",
          "label": "t:sections.common.heading.size.options.opt_4.label"
        },
        {
          "value": "heading_small",
          "label": "t:sections.common.heading.size.options.opt_5.label"
        },
        {
          "value": "heading_x_small",
          "label": "t:sections.common.heading.size.options.opt_6.label"
        },
        {
          "value": "heading_xx_small",
          "label": "t:sections.common.heading.size.options.opt_7.label"
        }
      ],
      "default": "heading_large"
    },
    {
      "type": "richtext",
      "id": "section_description",
      "label": "t:sections.common.description.label"
    },
    {
      "type": "header",
      "content": "t:sections.common.grid.content"
    },
    {
      "type": "range",
      "id": "number_of_columns_on_desktop",
      "label": "t:sections.common.grid.num_col_d.label",
      "min": 2,
      "max": 4,
      "step": 1,
      "default": 3
    },
    {
      "type": "range",
      "id": "number_of_rows",
      "label": "t:sections.common.grid.num_row_d.label",
      "min": 1,
      "max": 12,
      "step": 1,
      "default": 6
    },
    {
      "type": "select",
      "id": "number_of_columns_on_mobile",
      "label": "t:sections.common.grid.num_col_mob.label",
      "info": "t:sections.common.grid.num_col_mob.info_small",
      "options": [
        {
          "value": "1",
          "label": "t:sections.common.grid.num_col_mob.options.opt_1.label"
        },
        {
          "value": "2",
          "label": "t:sections.common.grid.num_col_mob.options.opt_2.label"
        }
      ],
      "default": "2"
    },
    {
      "type": "range",
      "id": "mob_cols_query",
      "label": "t:sections.common.grid.num_col_mob.query.label",
      "min": 416,
      "max": 640,
      "step": 4,
      "default": 576,
      "info": "t:sections.common.grid.num_col_mob.query.info"
    },
    {
      "type": "checkbox",
      "id": "hide_qty_field_on_mob",
      "label": "t:sections.common.grid.hide_atc.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "hide_info_bar_on_mob",
      "label": "t:sections.common.grid.hide_info_bar.label",
      "default": false
    },
    {
      "type": "header",
      "content": "t:sections.main_search.settings.product_card.content"
    },
    {
      "type": "select",
      "id": "column_image_ratio",
      "label": "t:sections.common.image.ratio.label",
      "options": [
        {
          "value": "adapt_to_image",
          "label": "t:sections.common.image.ratio.options.opt_1.label"
        },
        {
          "value": "portrait",
          "label": "t:sections.common.image.ratio.options.opt_2.label"
        },
        {
          "value": "square",
          "label": "t:sections.common.image.ratio.options.opt_3.label"
        },
        {
          "value": "landscape",
          "label": "t:sections.common.image.ratio.options.opt_4.label"
        }
      ],
      "default": "adapt_to_image"
    },
    {
      "type": "checkbox",
      "id": "show_product_rating",
      "label": "t:sections.common.show_rating.label",
      "default": true,
      "info": "t:sections.common.show_rating.info"
    },
    {
      "type": "checkbox",
      "id": "show_inventory",
      "label": "t:sections.common.show_inventory.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_savings_badge",
      "label": "t:sections.common.show_saving_badge.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "show_vendor",
      "label": "t:sections.common.show_vendor.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_compare_button",
      "label": "t:sections.common.enable_compare.label",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "enable_quick_add_button",
      "label": "t:sections.common.enable_quick_add.label",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.common.style.content"
    },
    {
      "type": "color_scheme",
      "id": "section_color_scheme",
      "default": "scheme1",
      "label": "t:sections.common.clr_scheme.label"
    },
    {
      "type": "header",
      "content": "t:sections.common.layout.content"
    },
    {
      "type": "checkbox",
      "id": "enable_filtering",
      "default": true,
      "label": "t:sections.main_search.settings.enable_filtering.label",
      "info": "t:sections.main_search.settings.enable_filtering.info"
    },
    {
      "type": "checkbox",
      "id": "enable_sorting",
      "default": true,
      "label": "t:sections.main_search.settings.enable_sorting.label"
    },
    {
      "type": "select",
      "id": "filter_type",
      "label": "t:sections.main_search.settings.filter_type.label",
      "options": [
        {
          "value": "horizontal",
          "label": "t:sections.main_search.settings.filter_type.options__1.label"
        },
        {
          "value": "vertical",
          "label": "t:sections.main_search.settings.filter_type.options__2.label"
        }
      ],
      "default": "vertical"
    },
    {
      "type": "select",
      "id": "paging_type",
      "label": "t:sections.main_search.settings.paging_type.label",
      "info": "t:sections.main_search.settings.paging_type.info",
      "options": [
        {
          "value": "pagination",
          "label": "t:sections.main_search.settings.paging_type.options.opt_1.label"
        },
        {
          "value": "click_load",
          "label": "t:sections.main_search.settings.paging_type.options.opt_2.label"
        },
        {
          "value": "load_more",
          "label": "t:sections.main_search.settings.paging_type.options.opt_3.label"
        }
      ],
      "default": "pagination"
    },
    {
      "type": "select",
      "id": "section_text_alignment",
      "label": "t:sections.common.text_align.label",
      "options": [
        {
          "value": "left",
          "label": "t:sections.common.text_align.options.opt_1.label"
        },
        {
          "value": "center",
          "label": "t:sections.common.text_align.options.opt_2.label"
        },
        {
          "value": "right",
          "label": "t:sections.common.text_align.options.opt_3.label"
        }
      ],
      "default": "center"
    },
    {
      "type": "checkbox",
      "id": "mobile_text_alignment",
      "label": "t:sections.common.cntr_mob.label",
      "default": false
    },
    {
      "type": "header",
      "content": "t:sections.common.spacing.content"
    },
    {
      "type": "range",
      "id": "section_top_padding",
      "label": "t:sections.common.spacing.top_spac.label",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 50,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "section_bottom_padding",
      "label": "t:sections.common.spacing.bottom_spac.label",
      "min": 0,
      "max": 100,
      "step": 1,
      "default": 50,
      "unit": "px"
    }
  ]
}
{% endschema %}